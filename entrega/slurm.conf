#
# Example slurm.conf file. Please run configurator.html
# (in doc/html) to build a configuration file customized
# for your environment.
#
#
# slurm.conf file generated by configurator.html.
#
# See the slurm.conf man page for more information.
#
ClusterName=linux
ControlMachine=sms-host
#ControlAddr=
#BackupController=
#BackupAddr=
#
SlurmUser=slurm
#SlurmdUser=root
SlurmctldPort=6817
SlurmdPort=6818
AuthType=auth/munge
#JobCredentialPrivateKey=
#JobCredentialPublicCertificate=
StateSaveLocation=/var/spool/slurm/ctld
SlurmdSpoolDir=/var/spool/slurm/d
SwitchType=switch/none
MpiDefault=none
SlurmctldPidFile=/var/run/slurmctld.pid
SlurmdPidFile=/var/run/slurmd.pid
ProctrackType=proctrack/pgid
#PluginDir=
#FirstJobId=
#MaxJobCount=
#PlugStackConfig=
#PropagatePrioProcess=
#PropagateResourceLimits=
#PropagateResourceLimitsExcept=
#Prolog=
#Epilog=
#SrunProlog=
#SrunEpilog=
#TaskProlog=
#TaskEpilog=
#TaskPlugin=
#TrackWCKey=no
#TreeWidth=50
#TmpFS=
#UsePAM=
#
# TIMERS
SlurmctldTimeout=300
SlurmdTimeout=300
InactiveLimit=0
MinJobAge=300
KillWait=30
Waittime=0
#
# SCHEDULING
SchedulerType=sched/backfill
#SchedulerAuth=
SelectType=select/cons_res
SelectTypeParameters=CR_Core_Memory
FastSchedule=1
#
# Inicio de melhorias
#
# JOB PREEMPTION SETTINGS
PreemptMode=SUSPEND,GANG
PreemptType=preempt/partition_prio

# PRIORITY SETTINGS
PriorityType=priority/multifactor
PriorityDecayHalfLife=3-0
PriorityWeightFairshare=10000
PriorityWeightAge=1000
PriorityWeightPartition=10000
PriorityWeightJobSize=100
PriorityMaxAge=1-0
#
# Fim de melhorias
#
# LOGGING
SlurmctldDebug=3
SlurmctldLogFile=/var/log/slurmctld.log
SlurmdDebug=3
SlurmdLogFile=/var/log/slurmd.log
JobCompType=jobcomp/none
#JobCompLoc=
#
# ACCOUNTING
#JobAcctGatherType=jobacct_gather/linux
#JobAcctGatherFrequency=30
#
#AccountingStorageType=accounting_storage/slurmdbd
#AccountingStorageHost=
#AccountingStorageLoc=
#AccountingStoragePass=
#AccountingStorageUser=
#
# COMPUTE NODES
# OpenHPC default configuration
TaskPlugin=task/affinity
PropagateResourceLimitsExcept=MEMLOCK
AccountingStorageType=accounting_storage/filetxt
Epilog=/etc/slurm/slurm.epilog.clean
NodeName=compute0[0-1] Sockets=1 CoresPerSocket=2 RealMemory=3000 ThreadsPerCore=1 State=UNKNOWN
PartitionName=urgent Nodes=compute0[0-1] Default=NO MaxTime=24:00:00 State=UP MaxMemPerNode=3000 Shared=YES Priority=10000 PriorityTier=3 OverSubscribe=FORCE:1
PartitionName=fair Nodes=compute0[0-1] Default=YES MaxTime=48:00:00 State=UP MaxMemPerNode=3000 Shared=YES Priority=10 PriorityTier=1
ReturnToService=1
HealthCheckProgram=/usr/sbin/nhc
HealthCheckInterval=300
